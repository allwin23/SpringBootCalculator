spring:
  application:
    name: jumbotail-shipping
  
  # Railway PostgreSQL injection 
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://${PGHOST:localhost}:${PGPORT:5432}/${PGDATABASE:postgres}}
    driverClassName: ${SPRING_DATASOURCE_DRIVER_CLASS_NAME:org.postgresql.Driver}
    username: ${SPRING_DATASOURCE_USERNAME:${PGUSER:postgres}}
    password: ${SPRING_DATASOURCE_PASSWORD:${PGPASSWORD:}}
  
  h2:
    console:
      enabled: false # Ensure console is disabled in production
  
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: update # Use update or validate in production
    show-sql: false # Disable raw SQL logging for performance

  cache:
    type: caffeine
    cache-names:
      - shippingEstimate
      - warehouseInventoryCheck
    caffeine:
      spec: maximumSize=500,expireAfterWrite=10m

server:
  port: ${PORT:9090}

# Expose actuator endpoints for Kubernetes / Docker compose healthchecks
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      probes:
        enabled: true
      show-details: always

logging:
  level:
    root: INFO
    com.jumbotail: INFO
